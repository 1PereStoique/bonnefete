<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Racines</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    body {
      background-image: url('1.jpeg');
      background-size: cover;
      background-position: center;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .box {
      background-color: rgba(0, 0, 0, 0.7);
      padding: 50px;
      border-radius: 20px;
      text-align: center;
      color: white;
      max-width: 800px;
    }
    .devinette p {
      margin: 10px 0;
      font-size: 25px;
      line-height: 1.5;
      opacity: 1;
    }
    input[type="text"] {
      padding: 12px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      margin-top: 15px;
      width: 60%;
    }
    button {
      padding: 12px 25px;
      font-size: 20px;
      margin-top: 15px;
      border: none;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    .error {
      color: #ff7070;
      margin-top: 15px;
      font-size: 20px;
      display: none;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="box">
    <div class="devinette">
      <p></p>
      <p></p>
      <p></p>
      <p></p>
      <p></p>
      <p></p>
      <p></p>
    </div>
    <form onsubmit="checkPassword(); return false;">
      <input type="text" id="password" placeholder="Qui suis-je ?" />
      <br />
      <button type="submit">Valider</button>
      <div class="error" id="errorMsg"></div>
    </form>
  </div>
  <script>
    const messages = [
      "Tu t’es trompé, Yves.",
      "Tu confonds.",
      "... fait la force.",
      "Là tu le fais exprès.",
      "T'as essayé 1234 ?",
      "Un fantastique boulet de ca...",
      "Sinon t'es fier de tes mains ?",
      "Indice : c'est pas la bonne réponse."
    ];
    function checkPassword() {
      const input = document.getElementById('password');
      const error = document.getElementById('errorMsg');
      const pass = input.value.trim().toLowerCase().replace(/[’']/g, "'");
      if (pass === '') {
        error.innerText = '';
        error.style.display = 'none';
        return;
      }
      const validPasswords = ['union', "l'union", 'lunion'];
      if (validPasswords.includes(pass)) {
        window.location.href = 'livre.html';
      } else {
        const random = Math.floor(Math.random() * messages.length);
        error.innerText = messages[random];
        error.style.display = 'block';
        input.value = '';
        input.focus();
      }
    }
    function showRiddle() {
      const lines = document.querySelectorAll('.devinette p');
      const texts = [
        "Je suis le lien invisible,",
        "Qui unit sans chaînes,",
        "Je suis plus fort que le sang,",
        "Car je rassemble même les cœurs lointains.",
        "Dans la différence je trouve ma force,",
        "Dans l’entraide je prends sens,",
        "Je fais d’un “je” un “nous”."
      ];
      lines.forEach(line => line.innerText = '');
      let currentLine = 0;
      function typeLine() {
        if (currentLine >= texts.length) return;
        let charIndex = 0;
        const currentText = texts[currentLine];
        function typeChar() {
          if (charIndex < currentText.length) {
            lines[currentLine].innerText += currentText[charIndex];
            charIndex++;
            setTimeout(typeChar, 30); // vitesse de frappe (lettre)
          } else {
            currentLine++;
            setTimeout(typeLine, 300); // délai entre chaque ligne
          }
        }
        typeChar();
      }
      typeLine();
    }
    window.addEventListener('pageshow', function () {
      const input = document.getElementById('password');
      const error = document.getElementById('errorMsg');
      if (input) input.value = '';
      if (error) {
        error.innerText = '';
        error.style.display = 'none';
      }
      showRiddle();
    });
    showRiddle();
  </script>
</body>
</html>
